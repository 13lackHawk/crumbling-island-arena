<root>
    <styles>
        <include src="file://{resources}/styles/custom_game/game_hud.css" />
    </styles>
    <script>
        $("#GameChatTarget").text = $.Localize(GameUI.GameChat.shiftHeld ? "#ChatAll" : "#ChatTeam");

        function HideGameChat() {
            if (GameUI.GameChat) {
                GameUI.GameChat.AddClass("ChatHidden");
            }
            
            $("#GameChatEntry").DeleteAsync(0);
        }

        function SubmitGameChat() {
            var entry = $("#GameChatEntry");
            if (entry.text.length == 0 && entry.BCanSeeInParentScroll()) {
                HideGameChat();
                return;
            }

            if (entry.text === "-ping") {
                Game.ServerCmd("dota_ping");
            } else {
                GameEvents.SendCustomGameEventToServer("custom_chat_say", { message: entry.text, team: !GameUI.GameChat.shiftHeld });
            }

            entry.text = "";
        }
    </script>
    <Panel>
        <TextEntry
            id="GameChatEntry"
            multiline="false"
            textmode="normal"
            oninputsubmit="SubmitGameChat()"
            maxchars="256"
            oncancel="HideGameChat()"
            onblur="HideGameChat()"
        >
            <Label id="GameChatTarget" text="[TEAM]"/>
        </TextEntry>
    </Panel>
</root>
